---
layout: base
---

<div class="home">
	{% if site.paginate %}
		{% assign posts = paginator.posts %}
	{% else %}
		{% assign posts = site.categories.blog %}
	{% endif %}

	{%- if posts.size > 0 -%}
		{%- if page.list_title -%}
			<h2 class="post-list-heading">{{ page.list_title }}</h2>
		{%- endif -%}

		<!-- Pinned Posts Section -->
	  <!-- scan through posts to find posts tagged pinned, so they can be generated first, and with a custom css -->
	  <ul class="post-list">
	    {% for post in site.posts %} {% if post.tags contains 'pinned' %}
	    <li class="pinned">
	      <span class="post-date post-meta">Pinned Post</span>
	      <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">
	      	{{ post.title }}
	      </a>
	      <br />
	      {% if post.custom_excerpt %}
	      <p>{{ post.custom_excerpt }}</p>
	      {% else %}
	      <p>{{ post.description }}</p>
	      {% endif %}
	    </li>
	    {% endif %} {% endfor %}
	  </ul>

		<!-- Normal post list -->
		<ul class="post-list">
			{%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
			{%- for post in posts -%}
			<li>
				<div class="post-meta post-listing">
					<div>
						<div>
							<a class="post-link" href="{{ post.url | relative_url }}">
								{{ post.title | escape }}
							</a>
						</div>
						<div class="post-meta">{{ post.date | date: date_format }}</div>
						<span class="post-description plain-text">{{ post.description }}</span>
					</div>
					<div>
						<img class="post-image" src="{{ post.image }}" />
					</div>

				<!--
					{%- if site.show_excerpts -%}
						{{ post.excerpt }}
					{%- endif -%}
				-->
			</li>
			{%- endfor -%}
		</ul>

		{% if site.paginate %}
			<div class="pager">
				<ul class="pagination">
				{%- if paginator.previous_page %}
					<li><a href="{{ paginator.previous_page_path | relative_url }}" class="previous-page">{{ paginator.previous_page }}</a></li>
				{%- else %}
					<li><div class="pager-edge">•</div></li>
				{%- endif %}
					<li><div class="current-page">{{ paginator.page }}</div></li>
				{%- if paginator.next_page %}
					<li><a href="{{ paginator.next_page_path | relative_url }}" class="next-page">{{ paginator.next_page }}</a></li>
				{%- else %}
					<li><div class="pager-edge">•</div></li>
				{%- endif %}
				</ul>
			</div>
		{%- endif %}

	{%- endif -%}

</div>
